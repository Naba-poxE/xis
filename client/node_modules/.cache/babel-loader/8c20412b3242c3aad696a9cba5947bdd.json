{"ast":null,"code":"import _regeneratorRuntime from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{postAPI,getAPI}from\"../../utils/FetchDatas\";import{AUTH}from'../types/authType';import{ALERT}from\"../types/alertType\";import{validRegister}from\"../../utils/Valid\";import{checkTokenExp}from\"../../utils/checkTokenExp\";export var login=function login(userLogin){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:ALERT,payload:{loading:true}});_context.next=4;return postAPI('login',userLogin);case 4:res=_context.sent;dispatch({type:AUTH,payload:res.data});dispatch({type:ALERT,payload:{success:res.data.msg}});localStorage.setItem('logged','Procure');_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);dispatch({type:ALERT,payload:{errors:_context.t0.response.data.msg}});case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var register=function register(userRegister){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var check,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:check=validRegister(userRegister);if(!(check.errLength>0)){_context2.next=3;break;}return _context2.abrupt(\"return\",dispatch({type:ALERT,payload:{errors:check.errMsg}}));case 3:_context2.prev=3;dispatch({type:ALERT,payload:{loading:true}});_context2.next=7;return postAPI('register',userRegister);case 7:res=_context2.sent;dispatch({type:ALERT,payload:{success:res.data.msg}});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);dispatch({type:ALERT,payload:{errors:_context2.t0.response.data.msg}});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var refreshToken=function refreshToken(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var logged,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:logged=localStorage.getItem('logged');if(!(logged!=='Procure')){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:_context3.prev=3;dispatch({type:ALERT,payload:{loading:true}});_context3.next=7;return getAPI('refresh_token');case 7:res=_context3.sent;dispatch({type:AUTH,payload:res.data});dispatch({type:ALERT,payload:{}});_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](3);dispatch({type:ALERT,payload:{errors:_context3.t0.response.data.msg}});localStorage.removeItem('logged');case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[3,12]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var logout=function logout(token){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var result,access_token;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return checkTokenExp(token,dispatch);case 2:result=_context4.sent;access_token=result?result:token;_context4.prev=4;localStorage.removeItem('logged');dispatch({type:AUTH,payload:{}});_context4.next=9;return getAPI('logout',access_token);case 9:_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](4);dispatch({type:ALERT,payload:{errors:_context4.t0.response.data.msg}});case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[4,11]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var forgotPassword=function forgotPassword(email){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;dispatch({type:ALERT,payload:{loading:true}});_context5.next=4;return postAPI('forgot_password',{email:email});case 4:res=_context5.sent;dispatch({type:ALERT,payload:{success:res.data.msg}});_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);dispatch({type:ALERT,payload:{errors:_context5.t0.response.data.msg}});case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/redux/actions/authActions.ts"],"names":["postAPI","getAPI","AUTH","ALERT","validRegister","checkTokenExp","login","userLogin","dispatch","type","payload","loading","res","data","success","msg","localStorage","setItem","errors","response","register","userRegister","check","errLength","errMsg","refreshToken","logged","getItem","removeItem","logout","token","result","access_token","forgotPassword","email"],"mappings":"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","sourcesContent":["import { Dispatch } from \"redux\"\nimport { IUserLogin,IUserRegister } from \"../../utils/TypeScript\"\nimport { postAPI,getAPI } from \"../../utils/FetchDatas\"\nimport { AUTH,IAuthType } from '../types/authType'\nimport { ALERT,IAlertType } from \"../types/alertType\"\nimport { validRegister } from \"../../utils/Valid\"\nimport { checkTokenExp } from \"../../utils/checkTokenExp\"\n\n\nexport const login = (userLogin: IUserLogin) => async (dispatch: Dispatch<IAuthType | IAlertType>) => {\n    try {\n        dispatch({ type: ALERT, payload: { loading:true }}) \n\n        const res = await postAPI('login', userLogin)\n\n        dispatch({ type: AUTH, payload: res.data })\n\n        dispatch({ type: ALERT, payload: {success: res.data.msg }})\n        localStorage.setItem('logged', 'Procure') \n\n    } catch (err: any) {\n        dispatch({ type: ALERT, payload: {errors: err.response.data.msg}}) \n    }\n}\n\nexport const register = (userRegister: IUserRegister) => async (dispatch: Dispatch<IAuthType | IAlertType>) => {\n    const check = validRegister(userRegister)\n    if(check.errLength > 0) return dispatch({ type: ALERT, payload: {errors: check.errMsg}});\n    try {\n       dispatch({ type: ALERT, payload:  { loading: true }})\n\n       const res = await postAPI('register', userRegister)\n\n       dispatch({ type: ALERT, payload: { success: res.data.msg }}) \n\n    } catch (err: any) {\n        dispatch({ type: ALERT, payload: {errors: err.response.data.msg}}) \n    }\n}\n\nexport const refreshToken = () => async (dispatch: Dispatch<IAuthType | IAlertType>) => {\n\n    const logged = localStorage.getItem('logged')\n    if(logged !== 'Procure') return;\n    try {\n       dispatch({ type: ALERT, payload:  { loading: true }})\n\n       const res = await getAPI('refresh_token')\n        dispatch({type: AUTH, payload: res.data})\n\n       dispatch({ type: ALERT, payload: { }}) \n\n    } catch (err: any) {\n        dispatch({ type: ALERT, payload: {errors: err.response.data.msg}}) \n        localStorage.removeItem('logged')\n    }\n}\n\nexport const logout = (token: string) => async (dispatch: Dispatch<IAuthType | IAlertType>) => {\n    const result = await checkTokenExp(token,dispatch)\n    const access_token = result ? result : token\n    try {\n      localStorage.removeItem('logged')\n      dispatch({ type: AUTH, payload: { } })\n      await getAPI('logout', access_token)\n\n    } catch (err: any) {\n        dispatch({ type: ALERT, payload: {errors: err.response.data.msg}}) \n    }\n}\n\nexport const forgotPassword = (email: string) => async(dispatch: Dispatch<IAuthType | IAlertType>) => {\n    try {\n        dispatch({type: ALERT, payload: { loading: true }})\n\n        const res = await postAPI('forgot_password', {email})\n    \n        dispatch({type: ALERT, payload: { success: res.data.msg}})\n    } catch (err: any) {\n        dispatch({type: ALERT, payload: { errors: err.response.data.msg}})\n    }\n}\n"]},"metadata":{},"sourceType":"module"}