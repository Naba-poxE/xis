{"ast":null,"code":"import _defineProperty from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import NotFound from\"../global/NotFound\";import{updateUser,resetPassword}from\"../../redux/actions/profileActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserInfo=function UserInfo(){var _auth$user,_auth$user2,_auth$user3;var initState={name:'',email:'',avatar:'',password:'',cf_password:''};var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();var _useState=useState(initState),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),typePass=_useState4[0],setTypePass=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),typeCfPass=_useState6[0],setTypeCfPass=_useState6[1];var handleChangeInput=function handleChangeInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));};var handleChangeFile=function handleChangeFile(e){var target=e.target;var files=target.files;if(files){var file=files[0];setUser(_objectSpread(_objectSpread({},user),{},{avatar:file}));}};var handleSubmit=function handleSubmit(e){e.preventDefault();if(avatar||name){dispatch(updateUser(avatar,name,auth));}if(password&&auth.access_token){dispatch(resetPassword(password,cf_password,auth.access_token));}};var name=user.name,avatar=user.avatar,password=user.password,cf_password=user.cf_password;if(!auth.user)return/*#__PURE__*/_jsx(NotFound,{});return/*#__PURE__*/_jsxs(\"form\",{className:\"profile_info glassmorphism\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info_avatar\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar?URL.createObjectURL(avatar):(_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.avatar,alt:\"avatar\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-camera\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Change\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",name:\"file\",id:\"file_up\",onChange:handleChangeFile})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"name\",className:\"form-control\",defaultValue:(_auth$user2=auth.user)===null||_auth$user2===void 0?void 0:_auth$user2.name,onChange:handleChangeInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",id:\"email\",className:\"form-control\",defaultValue:(_auth$user3=auth.user)===null||_auth$user3===void 0?void 0:_auth$user3.email,onChange:handleChangeInput,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pass\",children:[/*#__PURE__*/_jsx(\"input\",{type:typePass?'text':'password',className:\"form-control\",name:\"password\",id:\"password\",value:password,onChange:handleChangeInput}),/*#__PURE__*/_jsx(\"small\",{onClick:function onClick(){return setTypePass(!typePass);},children:typePass?'Hide':'Show'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cf_password\",children:\"Confirm password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pass\",children:[/*#__PURE__*/_jsx(\"input\",{type:typeCfPass?'text':'password',className:\"form-control\",name:\"cf_password\",id:\"cf_password\",value:cf_password,onChange:handleChangeInput}),/*#__PURE__*/_jsx(\"small\",{onClick:function onClick(){return setTypeCfPass(!typeCfPass);},children:typeCfPass?'Hide':'Show'})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark w-100\",type:\"submit\",children:\"Update\"})]});};export default UserInfo;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/components/profile/UserInfo.tsx"],"names":["useState","useSelector","useDispatch","NotFound","updateUser","resetPassword","UserInfo","initState","name","email","avatar","password","cf_password","state","auth","dispatch","user","setUser","typePass","setTypePass","typeCfPass","setTypeCfPass","handleChangeInput","e","target","value","handleChangeFile","files","file","handleSubmit","preventDefault","access_token","URL","createObjectURL"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useSelector,useDispatch } from \"react-redux\";\nimport { RootStore,InputChange, IUserProfile,FormSubmit } from \"../../utils/TypeScript\";\nimport NotFound from \"../global/NotFound\";\nimport { updateUser,resetPassword } from \"../../redux/actions/profileActions\";\n\nconst UserInfo = () => {\n    const initState = {\n        name:'',\n        email:'',\n        avatar:'',\n        password:'',\n        cf_password:''\n    }\n\n    const { auth } = useSelector((state: RootStore) => state)\n    const dispatch = useDispatch()\n\n    const [ user,setUser ] = useState<IUserProfile>(initState)\n    const [ typePass,setTypePass ] = useState(false)\n    const [ typeCfPass,setTypeCfPass ] = useState(false)\n\n    const handleChangeInput = (e: InputChange) => {\n        const { name,value } = e.target\n        setUser({...user, [name]:value })\n    }\n\n    const handleChangeFile = (e: InputChange) => {\n        const target = e.target as HTMLInputElement\n        const files = target.files\n\n        if(files) {\n            const file = files[0]\n            setUser({...user, avatar: file})\n        }\n    }\n\n    const handleSubmit = (e: FormSubmit) => {\n        e.preventDefault()\n        if( avatar || name ) {\n            dispatch(updateUser((avatar as File),name,auth))\n        }\n\n        if( password && auth.access_token ) {\n            dispatch(resetPassword( password, cf_password, auth.access_token))\n        }\n    }\n\n    const { name,avatar,password,cf_password } = user\n\n    if(!auth.user) return <NotFound/>\n    return(\n        <form className=\"profile_info glassmorphism\" onSubmit={handleSubmit}>\n            <div className=\"info_avatar\">\n                <img src={ avatar ? URL.createObjectURL(avatar) : auth.user?.avatar } alt=\"avatar\" />\n\n                <span>\n                    <i className=\"fas fa-camera\"/>\n                    <p>Change</p>\n                    <input \n                        type=\"file\" \n                        accept=\"image/*\" \n                        name=\"file\" id=\"file_up\"\n                        onChange={handleChangeFile}/>\n                </span>\n            </div>\n           \n            <div className=\"form-group my-3\">\n                <label htmlFor=\"name\">Name</label> \n                <input \n                    type=\"text\" \n                    name=\"name\" \n                    id=\"name\"\n                    className=\"form-control\" \n                    defaultValue={auth.user?.name} \n                    onChange={handleChangeInput} />\n            </div>\n\n            <div className=\"form-group my-3\">\n                <label htmlFor=\"email\">Email</label> \n                <input \n                    type=\"text\" \n                    name=\"email\" \n                    id=\"email\"\n                    className=\"form-control\" \n                    defaultValue={auth.user?.email} \n                    onChange={handleChangeInput} \n                    disabled={true} />\n            </div>\n\n            <div className=\"form-group my-3\">\n                <label htmlFor=\"password\">Password</label> \n                <div className=\"pass\">\n                    <input \n                        type={ typePass ? 'text' : 'password'} \n                        className=\"form-control\" \n                        name=\"password\" \n                        id=\"password\"\n                        value={password} \n                        onChange={handleChangeInput} />\n\n                    <small onClick={() => setTypePass(!typePass)}>\n                        {typePass ? 'Hide' : 'Show'}\n                    </small>    \n                </div>\n\n            </div>\n\n            <div className=\"form-group my-3\">\n                <label htmlFor=\"cf_password\">Confirm password</label> \n                <div className=\"pass\">\n                    <input \n                        type={ typeCfPass ? 'text' : 'password'} \n                        className=\"form-control\" \n                        name=\"cf_password\" \n                        id=\"cf_password\"\n                        value={cf_password} \n                        onChange={handleChangeInput} />\n\n                    <small onClick={() => setTypeCfPass(!typeCfPass)}>\n                        {typeCfPass ? 'Hide' : 'Show'}\n                    </small>    \n                </div>\n\n            </div>\n\n            <button className=\"btn btn-dark w-100\" type=\"submit\">\n                Update\n            </button>\n        </form>\n    )\n}\n\nexport default UserInfo;"]},"metadata":{},"sourceType":"module"}