{"ast":null,"code":"import{useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Link}from\"react-router-dom\";import NotFound from\"../components/global/NotFound\";import{deleteUser,getUsers}from\"../redux/actions/usersActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Users=function Users(){var _auth$user2,_auth$user4;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,users=_useSelector.users;var dispatch=useDispatch();// const [users,setUsers] = useState<IUser[]>([])\n// useEffect(() => {\n//    if(auth.user?.role === 'admin') {\n//        getAPI('users',auth.access_token)\n//        .then(res => {\n//             setUsers(res.data)\n//        })\n//    }\n// },[auth.access_token,auth.user?.role])\nuseEffect(function(){var _auth$user;if(((_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.role)==='admin')dispatch(getUsers(auth.access_token));},[dispatch,(_auth$user2=auth.user)===null||_auth$user2===void 0?void 0:_auth$user2.role,auth.access_token]);var handleDelete=function handleDelete(id){var _auth$user3;if(((_auth$user3=auth.user)===null||_auth$user3===void 0?void 0:_auth$user3._id)!==id){if(window.confirm(\"Are you sure you want to delete this user?\")){dispatch(deleteUser(id,auth.access_token));}}};if(((_auth$user4=auth.user)===null||_auth$user4===void 0?void 0:_auth$user4.role)!==\"admin\")return/*#__PURE__*/_jsx(NotFound,{});return/*#__PURE__*/_jsx(\"div\",{className:\"w-100 my-5 d-flex justify-content-center overflow-auto\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table neomorphism\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"_id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-secondary\",children:users.map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:data._id}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(data._id),children:data.name})}),/*#__PURE__*/_jsx(\"td\",{children:data.email}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:data.role===\"admin\"?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",title:\"Admin\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",title:\"User\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"i\",{style:{cursor:'pointer'},className:\"fas fa-trash-alt text-danger\",title:\"Remove\",onClick:function onClick(){return handleDelete(data._id);}})})]},data._id);})})]})})});};export default Users;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/pages/users.tsx"],"names":["useEffect","useSelector","useDispatch","Link","NotFound","deleteUser","getUsers","Users","state","auth","users","dispatch","user","role","access_token","handleDelete","id","_id","window","confirm","map","data","name","email","cursor"],"mappings":"AAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OAASC,WAAT,CAAqBC,WAArB,KAAwC,aAAxC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,+BAArB,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,+BAArC,C,wFAIA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,6BAEhB,iBAAuBN,WAAW,CAAC,SAACO,KAAD,QAAsBA,CAAAA,KAAtB,EAAD,CAAlC,CAAQC,IAAR,cAAQA,IAAR,CAAaC,KAAb,cAAaA,KAAb,CACA,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEAF,SAAS,CAAC,UAAM,gBACZ,GAAG,aAAAS,IAAI,CAACG,IAAL,gDAAWC,IAAX,IAAoB,OAAvB,CAAgCF,QAAQ,CAACL,QAAQ,CAACG,IAAI,CAACK,YAAN,CAAT,CAAR,CACnC,CAFQ,CAEP,CAACH,QAAD,cAAUF,IAAI,CAACG,IAAf,sCAAU,YAAWC,IAArB,CAA0BJ,IAAI,CAACK,YAA/B,CAFO,CAAT,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,EAAD,CAAe,iBAChC,GAAG,cAAAP,IAAI,CAACG,IAAL,kDAAWK,GAAX,IAAmBD,EAAtB,CAA0B,CACtB,GAAGE,MAAM,CAACC,OAAP,CAAe,4CAAf,CAAH,CAAgE,CAC7DR,QAAQ,CAACN,UAAU,CAACW,EAAD,CAAIP,IAAI,CAACK,YAAT,CAAX,CAAR,CACF,CACJ,CACJ,CAND,CAQA,GAAG,cAAAL,IAAI,CAACG,IAAL,kDAAWC,IAAX,IAAoB,OAAvB,CAAgC,mBAAO,KAAC,QAAD,IAAP,CAChC,mBACI,YAAK,SAAS,CAAC,wDAAf,uBACI,kCACI,eAAO,SAAS,CAAC,mBAAjB,wBACI,oCACI,mCACI,WAAI,KAAK,CAAC,KAAV,iBADJ,cAEI,WAAI,KAAK,CAAC,KAAV,kBAFJ,cAGI,WAAI,KAAK,CAAC,KAAV,mBAHJ,cAII,WAAI,KAAK,CAAC,KAAV,mBAJJ,cAKI,WAAI,KAAK,CAAC,KAAV,oBALJ,GADJ,EADJ,cAUI,cAAO,SAAS,CAAC,gBAAjB,UAEQH,KAAK,CAACU,GAAN,CAAU,SAAAC,IAAI,qBACV,mCACI,WAAI,KAAK,CAAC,KAAV,UAAiBA,IAAI,CAACJ,GAAtB,EADJ,cAEI,iCACI,KAAC,IAAD,EAAM,EAAE,oBAAcI,IAAI,CAACJ,GAAnB,CAAR,UACKI,IAAI,CAACC,IADV,EADJ,EAFJ,cAOI,oBAAKD,IAAI,CAACE,KAAV,EAPJ,cAQI,WAAI,SAAS,CAAC,aAAd,UAEQF,IAAI,CAACR,IAAL,GAAc,OAAd,cACE,UAAG,SAAS,CAAC,cAAb,CAA4B,KAAK,CAAC,OAAlC,EADF,cAEE,UAAG,SAAS,CAAC,cAAb,CAA4B,KAAK,CAAC,MAAlC,EAJV,EARJ,cAeI,WAAI,SAAS,CAAC,aAAd,uBACI,UAAG,KAAK,CAAE,CAACW,MAAM,CAAC,SAAR,CAAV,CAA8B,SAAS,CAAC,8BAAxC,CAAuE,KAAK,CAAC,QAA7E,CACA,OAAO,CAAE,yBAAMT,CAAAA,YAAY,CAACM,IAAI,CAACJ,GAAN,CAAlB,EADT,EADJ,EAfJ,GAASI,IAAI,CAACJ,GAAd,CADU,EAAd,CAFR,EAVJ,GADJ,EADJ,EADJ,CA4CH,CA1ED,CA4EA,cAAeV,CAAAA,KAAf","sourcesContent":["import { useEffect } from \"react\";\nimport { useSelector,useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport NotFound from \"../components/global/NotFound\";\nimport { deleteUser, getUsers } from \"../redux/actions/usersActions\";\nimport { RootStore } from \"../utils/TypeScript\";\n\n\nconst Users = () => {\n\n    const { auth,users } = useSelector((state: RootStore) => state)\n    const dispatch = useDispatch()\n\n    // const [users,setUsers] = useState<IUser[]>([])\n    \n    // useEffect(() => {\n    //    if(auth.user?.role === 'admin') {\n    //        getAPI('users',auth.access_token)\n    //        .then(res => {\n    //             setUsers(res.data)\n\n    //        })\n    //    }\n    // },[auth.access_token,auth.user?.role])\n\n    useEffect(() => {\n        if(auth.user?.role === 'admin') dispatch(getUsers(auth.access_token!))\n    },[dispatch,auth.user?.role,auth.access_token])\n\n    const handleDelete = (id:string) => {\n        if(auth.user?._id !== id) {\n            if(window.confirm(\"Are you sure you want to delete this user?\")){\n               dispatch(deleteUser(id,auth.access_token!))\n            }\n        }\n    }\n\n    if(auth.user?.role !== \"admin\") return <NotFound/>\n    return (\n        <div className=\"w-100 my-5 d-flex justify-content-center overflow-auto\">\n            <div>\n                <table className=\"table neomorphism\">\n                    <thead >\n                        <tr>\n                            <th scope=\"col\">_id</th>\n                            <th scope=\"col\">Name</th>\n                            <th scope=\"col\">Email</th>\n                            <th scope=\"col\">Admin</th>\n                            <th scope=\"col\">Action</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"text-secondary\">\n                        {\n                            users.map(data => (\n                                <tr key={data._id}>\n                                    <th scope=\"row\">{data._id}</th>\n                                    <td>\n                                        <Link to={`/profile/${data._id}`}>\n                                            {data.name}\n                                        </Link>    \n                                    </td>\n                                    <td>{data.email}</td>\n                                    <td className=\"text-center\">\n                                        {\n                                            data.role === \"admin\" \n                                            ? <i className=\"fas fa-check\" title=\"Admin\"></i>\n                                            : <i className=\"fas fa-times\" title=\"User\"></i> \n                                        }\n                                    </td>\n                                    <td className=\"text-center\">\n                                        <i style={{cursor:'pointer'}} className=\"fas fa-trash-alt text-danger\" title=\"Remove\"\n                                        onClick={() => handleDelete(data._id)} ></i>\n                                    </td>\n                                </tr>\n                            \n                            ))\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}\n\nexport default Users;"]},"metadata":{},"sourceType":"module"}