{"ast":null,"code":"import _slicedToArray from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useParams,useHistory}from'react-router-dom';import{getBlogsByUserId}from'../../redux/actions/blogActions';import Loading from'../global/Loading';import CardHoriz from'../cards/CardHoriz';import Pagination from'../global/Pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserBlogs=function UserBlogs(){var _useSelector=useSelector(function(state){return state;}),blogsUser=_useSelector.blogsUser;var user_id=useParams().slug;var dispatch=useDispatch();var history=useHistory();var search=history.location.search;var _useState=useState(),_useState2=_slicedToArray(_useState,2),blogs=_useState2[0],setBlogs=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];useEffect(function(){if(!user_id)return;if(blogsUser.every(function(item){return item.id!==user_id;})){dispatch(getBlogsByUserId(user_id,search));}else{var data=blogsUser.find(function(item){return item.id===user_id;});if(!data)return;setBlogs(data.blogs);setTotal(data.total);if(data.search)history.push(data.search);}},[user_id,blogsUser,dispatch,search,history]);var handlePagination=function handlePagination(num){var search=\"?page=\".concat(num);dispatch(getBlogsByUserId(user_id,search));};if(!blogs)return/*#__PURE__*/_jsx(Loading,{});if(blogs.length===0&&total<1)return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"No Blogs yet\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:blogs.map(function(blog){return/*#__PURE__*/_jsx(CardHoriz,{blog:blog},blog._id);})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Pagination,{total:total,callback:handlePagination})})]});};export default UserBlogs;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/components/profile/UserBlogs.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","useParams","useHistory","getBlogsByUserId","Loading","CardHoriz","Pagination","UserBlogs","state","blogsUser","user_id","slug","dispatch","history","search","location","blogs","setBlogs","total","setTotal","every","item","id","data","find","push","handlePagination","num","length","map","blog","_id"],"mappings":"+GAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,SAAxB,KAAyC,OAAzC,CACA,OAASC,WAAT,CAAqBC,WAArB,KAAwC,aAAxC,CACA,OAASC,SAAT,CAAmBC,UAAnB,KAAqC,kBAArC,CAEA,OAASC,gBAAT,KAAiC,iCAAjC,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAEpB,iBAAsBP,WAAW,CAAC,SAACQ,KAAD,QAAsBA,CAAAA,KAAtB,EAAD,CAAjC,CAAQC,SAAR,cAAQA,SAAR,CACA,GAAMC,CAAAA,OAAO,CAAGT,SAAS,GAAYU,IAArC,CACA,GAAMC,CAAAA,QAAQ,CAAGb,WAAW,EAA5B,CACA,GAAMc,CAAAA,OAAO,CAAGX,UAAU,EAA1B,CACA,GAAQY,CAAAA,MAAR,CAAmBD,OAAO,CAACE,QAA3B,CAAQD,MAAR,CAEA,cAA2BjB,QAAQ,EAAnC,wCAAQmB,KAAR,eAAcC,QAAd,eACA,eAA2BpB,QAAQ,CAAC,CAAD,CAAnC,yCAAQqB,KAAR,eAAcC,QAAd,eAEArB,SAAS,CAAC,UAAM,CACZ,GAAG,CAACY,OAAJ,CAAa,OAEb,GAAGD,SAAS,CAACW,KAAV,CAAgB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAYZ,OAAhB,EAApB,CAAH,CAAiD,CAC7CE,QAAQ,CAACT,gBAAgB,CAACO,OAAD,CAAUI,MAAV,CAAjB,CAAR,CACH,CAFD,IAEK,CACD,GAAMS,CAAAA,IAAI,CAAGd,SAAS,CAACe,IAAV,CAAe,SAAAH,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAYZ,OAAhB,EAAnB,CAAb,CACA,GAAG,CAACa,IAAJ,CAAU,OAEVN,QAAQ,CAACM,IAAI,CAACP,KAAN,CAAR,CACAG,QAAQ,CAACI,IAAI,CAACL,KAAN,CAAR,CACA,GAAGK,IAAI,CAACT,MAAR,CAAgBD,OAAO,CAACY,IAAR,CAAaF,IAAI,CAACT,MAAlB,EACnB,CAEJ,CAdQ,CAcP,CAACJ,OAAD,CAAUD,SAAV,CAAqBG,QAArB,CAA+BE,MAA/B,CAAuCD,OAAvC,CAdO,CAAT,CAgBA,GAAMa,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,GAAD,CAAiB,CACtC,GAAMb,CAAAA,MAAM,iBAAYa,GAAZ,CAAZ,CACAf,QAAQ,CAACT,gBAAgB,CAACO,OAAD,CAAUI,MAAV,CAAjB,CAAR,CACH,CAHD,CAKA,GAAG,CAACE,KAAJ,CAAW,mBAAO,KAAC,OAAD,IAAP,CAEX,GAAGA,KAAK,CAACY,MAAN,GAAiB,CAAjB,EAAsBV,KAAK,CAAG,CAAjC,CAAoC,mBAChC,WAAI,SAAS,CAAC,aAAd,0BADgC,CAIpC,mBACI,oCACI,qBAEQF,KAAK,CAACa,GAAN,CAAU,SAAAC,IAAI,qBACV,KAAC,SAAD,EAA0B,IAAI,CAAEA,IAAhC,EAAgBA,IAAI,CAACC,GAArB,CADU,EAAd,CAFR,EADJ,cASI,kCACQ,KAAC,UAAD,EACI,KAAK,CAAEb,KADX,CAEI,QAAQ,CAAEQ,gBAFd,EADR,EATJ,GADJ,CAiBH,CAvDD,CAyDA,cAAenB,CAAAA,SAAf","sourcesContent":["import React,{ useState,useEffect } from 'react'\nimport { useDispatch,useSelector } from 'react-redux';\nimport { useParams,useHistory } from 'react-router-dom';\nimport { IBlog, IParams, RootStore } from '../../utils/TypeScript';\nimport { getBlogsByUserId } from '../../redux/actions/blogActions';\nimport Loading from '../global/Loading';\nimport CardHoriz from '../cards/CardHoriz';\nimport Pagination from '../global/Pagination';\n\nconst UserBlogs = () => {\n\n    const { blogsUser } = useSelector((state: RootStore) => state)\n    const user_id = useParams<IParams>().slug\n    const dispatch = useDispatch()\n    const history = useHistory()\n    const { search } = history.location\n\n    const [ blogs,setBlogs ] = useState<IBlog[]>()\n    const [ total,setTotal ] = useState(0)\n\n    useEffect(() => {\n        if(!user_id) return;\n\n        if(blogsUser.every(item => item.id !== user_id)) {\n            dispatch(getBlogsByUserId(user_id, search))\n        }else{\n            const data = blogsUser.find(item => item.id === user_id)\n            if(!data) return;\n\n            setBlogs(data.blogs)\n            setTotal(data.total)\n            if(data.search) history.push(data.search)\n        }\n    \n    },[user_id, blogsUser, dispatch, search, history])\n\n    const handlePagination = (num: number) => {\n        const search = `?page=${num}`\n        dispatch(getBlogsByUserId(user_id, search))\n    }\n\n    if(!blogs) return <Loading/>\n\n    if(blogs.length === 0 && total < 1) return (\n        <h3 className=\"text-center\">No Blogs yet</h3>\n    )\n    \n    return(\n        <div>\n            <div>\n                {\n                    blogs.map(blog => (\n                        <CardHoriz key={blog._id} blog={blog} />\n                    ))\n                }\n            </div>\n\n            <div>\n                    <Pagination \n                        total={total} \n                        callback={handlePagination} />\n            </div>\n        </div>\n    )\n}\n\nexport default UserBlogs;"]},"metadata":{},"sourceType":"module"}