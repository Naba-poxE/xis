{"ast":null,"code":"import _slicedToArray from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useHistory}from\"react-router-dom\";import Pagination from\"../global/Pagination\";import{getBlogsByCategoryId}from'../../redux/actions/blogActions';import CardHorizontal from\"../cards/CardHorizontal\";import HrBanner from\"../global/HrBanner\";import'../display/hero/hero.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DisplayBlog=function DisplayBlog(_ref){var blog=_ref.blog;var _useSelector=useSelector(function(state){return state;}),blogsCategory=_useSelector.blogsCategory;var dispatch=useDispatch();var history=useHistory();var search=history.location.search;var _useState=useState(),_useState2=_slicedToArray(_useState,2),blogs=_useState2[0],setBlogs=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];useEffect(function(){if(!blog.category)return;if(blogsCategory.every(function(item){return item.id!==blog.category;})){dispatch(getBlogsByCategoryId(blog.category,search));}else{var data=blogsCategory.find(function(element){return element.id===blog.category;});if(!data)return;setBlogs(data.blogs);setTotal(data.total);if(data.search)history.push(data.search);//the search came when we put the search on blogsType.ts\n}},[blogsCategory,blog.category,dispatch,search,history]);var handlePaginationRelated=function handlePaginationRelated(num){var search=\"?page=\".concat(num);dispatch(getBlogsByCategoryId(blog.category,search));};var handleShare=function handleShare(url){var currentURL=encodeURI(window.location.href);var throwURL=url+currentURL;window.open(throwURL);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'48rem',marginLeft:'auto',marginTop:'2rem',marginRight:'auto'},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-capitalize fs-1\",children:blog.title}),/*#__PURE__*/_jsx(\"p\",{className:\"lead text-capitalize\",children:blog.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[\"By: \",typeof blog.user!=='string'&&/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(blog.user._id),children:/*#__PURE__*/_jsx(\"p\",{children:blog.user.name})}),/*#__PURE__*/_jsx(\"p\",{className:\"ms-4\",children:new Date().toDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",style:{fontSize:'20px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return handleShare(\"https://www.facebook.com/sharer/sharer.php?u=\");},className:\"me-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-brands fa-facebook\"})}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return handleShare(\"https://twitter.com/intent/tweet?text=\");},className:\"mx-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-brands fa-twitter-square\"})}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return handleShare(\"https://www.linkedin.com/sharing/share-offsite/?url=\");},className:\"mx-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-brands fa-linkedin\"})})]})]}),typeof blog.thumbnail==='string'&&/*#__PURE__*/_jsx(\"img\",{src:blog.thumbnail,className:\"card-img display__img\",alt:\"blog-thumbnail\"}),/*#__PURE__*/_jsx(\"div\",{className:\"display__content mt-4\",style:{fontSize:'1.25rem'},dangerouslySetInnerHTML:{__html:blog.content}})]})}),/*#__PURE__*/_jsx(HrBanner,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontWeight:500},children:\"Related Posts\"}),blogs===null||blogs===void 0?void 0:blogs.map(function(blog){return/*#__PURE__*/_jsx(CardHorizontal,{blog:blog},blog._id);})]}),total>1&&/*#__PURE__*/_jsx(Pagination,{total:total,callback:handlePaginationRelated})]})]});};export default DisplayBlog;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/components/blog/DisplayBlog.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","useHistory","Pagination","getBlogsByCategoryId","CardHorizontal","HrBanner","DisplayBlog","blog","state","blogsCategory","dispatch","history","search","location","blogs","setBlogs","total","setTotal","category","every","item","id","data","find","element","push","handlePaginationRelated","num","handleShare","url","currentURL","encodeURI","window","href","throwURL","open","maxWidth","marginLeft","marginTop","marginRight","title","description","user","_id","name","Date","toDateString","fontSize","cursor","thumbnail","__html","content","fontWeight","map"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState } from \"react\";\nimport { IBlog, RootStore } from \"../../utils/TypeScript\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link,useHistory } from \"react-router-dom\";\nimport Pagination from \"../global/Pagination\";\nimport { getBlogsByCategoryId } from '../../redux/actions/blogActions'\nimport CardHorizontal from \"../cards/CardHorizontal\";\nimport HrBanner from \"../global/HrBanner\";\n\nimport '../display/hero/hero.css'\n\ninterface IProps {\n    blog: IBlog\n}\n\nconst DisplayBlog: React.FC<IProps> = ({blog}) => {\n\n    const { blogsCategory} = useSelector((state: RootStore) => state)\n    const dispatch = useDispatch()\n\n    const history = useHistory()\n    const { search } = history.location\n\n    const [ blogs,setBlogs ] = useState<IBlog[]>()\n    const [ total,setTotal ] = useState(0)\n\n    useEffect(() => {\n        if(!blog.category) return;\n\n        if(blogsCategory.every(item => item.id !== blog.category)) {\n            dispatch(getBlogsByCategoryId(blog.category, search))\n        }else {\n            const data = blogsCategory.find(element => element.id === blog.category)\n            if(!data) return;\n\n            setBlogs(data.blogs)\n            setTotal(data.total)\n\n            if(data.search) history.push(data.search) //the search came when we put the search on blogsType.ts\n        }\n            \n    },[ blogsCategory,blog.category, dispatch, search, history])\n\n    const handlePaginationRelated = (num: number) => {\n        const search = `?page=${num}`\n        dispatch(getBlogsByCategoryId(blog.category, search))\n    }\n\n    const handleShare = (url:string) => {\n        const currentURL = encodeURI(window.location.href);\n        const throwURL = url + currentURL\n        window.open(throwURL);\n    }\n\n    return(\n        <>\n            <div className=\"card\">\n            </div>\n            <div className=\"container\">\n                <div className=\"\">\n                    <div style={{maxWidth: '48rem',marginLeft: 'auto',marginTop:'2rem', marginRight:'auto'}}>\n                            <h1 className=\"text-capitalize fs-1\">\n                                {blog.title}\n                            </h1>\n                            <p className=\"lead text-capitalize\">\n                                {blog.description}\n                            </p>\n                            <div className=\"d-flex flex-column\">\n                                <div className=\"d-flex\">\n                                By: {\n                                        typeof (blog.user) !== 'string' &&\n                                        <Link to={`/profile/${blog.user._id}`}>\n                                            <p>{blog.user.name}</p>\n                                        </Link>\n                                    }\n                                    <p className=\"ms-4\">{new Date().toDateString()}</p>\n                                </div>\n                                <div className=\"d-flex\" style={{fontSize: '20px', cursor: 'pointer'}}>\n                                    <p onClick={() => handleShare(\"https://www.facebook.com/sharer/sharer.php?u=\")} className=\"me-3\"><i className=\"fab fa-brands fa-facebook\" /></p>\n                                    <p onClick={() => handleShare(\"https://twitter.com/intent/tweet?text=\")}  className=\"mx-3\"><i className=\"fab fa-brands fa-twitter-square\" /></p>\n                                    <p onClick={() => handleShare(\"https://www.linkedin.com/sharing/share-offsite/?url=\")} className=\"mx-3\"><i className=\"fab fa-brands fa-linkedin\" /></p>\n                                </div>\n                            </div>\n                        {\n                            typeof(blog.thumbnail) === 'string' &&\n                            <img src={blog.thumbnail} className=\"card-img display__img\" alt=\"blog-thumbnail\" />\n                        }\n                        <div className=\"display__content mt-4\" style={{fontSize: '1.25rem'}}  dangerouslySetInnerHTML={{\n                            __html: blog.content\n                        }} />\n                    </div>\n                </div>\n                <HrBanner />\n\n                <div className=\"mt-5\">\n                    <h1 style={{fontWeight: 500}}>Related Posts</h1>\n                    {\n                        blogs?.map(blog => (\n                            <CardHorizontal key={blog._id} blog={blog} />\n                        ))\n                    }\n                </div>\n                {\n                    total > 1 && \n                    <Pagination total={total} callback={handlePaginationRelated} />\n                }\n            </div>\n        </>\n    )\n}\n\nexport default DisplayBlog;"]},"metadata":{},"sourceType":"module"}