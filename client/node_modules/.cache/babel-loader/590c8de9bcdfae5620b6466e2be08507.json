{"ast":null,"code":"import _regeneratorRuntime from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{getAPI}from'../../utils/FetchDatas';import{useLocation}from'react-router-dom';import SearchCard from'../cards/SearchCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),blogs=_useState4[0],setBlogs=_useState4[1];var _useLocation=useLocation(),pathname=_useLocation.pathname;useEffect(function(){var delayDebounce=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(search.length<2)){_context.next=2;break;}return _context.abrupt(\"return\",setBlogs([]));case 2:_context.prev=2;_context.next=5;return getAPI(\"search/blogs?title=\".concat(search));case 5:res=_context.sent;setBlogs(res.data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);})),400);return function(){return clearTimeout(delayDebounce);};},[search]);useEffect(function(){setSearch('');setBlogs([]);},[pathname]);return/*#__PURE__*/_jsxs(\"div\",{className:\"search position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-transparent border border-dark w-100\",value:search,placeholder:\"Enter your search...\",onChange:function onChange(e){return setSearch(e.target.value);}}),search.length>=2&&/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute pt-2 px-1 w-100 rounded\",style:{background:'#F2F6FF',zIndex:10,maxHeight:'calc(100vh - 100px)',overflow:'auto'},children:blogs.length?blogs.map(function(blog){return/*#__PURE__*/_jsx(SearchCard,{blog:blog},blog._id);}):/*#__PURE__*/_jsx(\"h3\",{className:\"text-center text-dark\",children:\"Looks like no result found for your search\"})})]});};export default Search;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/components/global/Search.tsx"],"names":["useState","useEffect","getAPI","useLocation","SearchCard","Search","search","setSearch","blogs","setBlogs","pathname","delayDebounce","setTimeout","length","res","data","console","log","clearTimeout","e","target","value","background","zIndex","maxHeight","overflow","map","blog","_id"],"mappings":"0UAAA,OAASA,QAAT,CAAkBC,SAAlB,KAAmC,OAAnC,CACA,OAASC,MAAT,KAAuB,wBAAvB,CAEA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,cAA4BL,QAAQ,CAAC,EAAD,CAApC,wCAAOM,MAAP,eAAeC,SAAf,eACA,eAA0BP,QAAQ,CAAU,EAAV,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eAEA,iBAAqBN,WAAW,EAAhC,CAAQO,QAAR,cAAQA,QAAR,CAEAT,SAAS,CAAC,UAAM,CACd,GAAMU,CAAAA,aAAa,CAAGC,UAAU,sEAAC,gJAC5BN,MAAM,CAACO,MAAP,CAAgB,CADY,0DACFJ,QAAQ,CAAC,EAAD,CADN,+CAIXP,CAAAA,MAAM,8BAAuBI,MAAvB,EAJK,QAIvBQ,GAJuB,eAK7BL,QAAQ,CAACK,GAAG,CAACC,IAAL,CAAR,CAL6B,+EAQ3BC,OAAO,CAACC,GAAR,cAR2B,oEAAD,GAU9B,GAV8B,CAAhC,CAYA,MAAO,kBAAMC,CAAAA,YAAY,CAACP,aAAD,CAAlB,EAAP,CAED,CAfQ,CAeP,CAACL,MAAD,CAfO,CAAT,CAiBAL,SAAS,CAAC,UAAM,CACdM,SAAS,CAAC,EAAD,CAAT,CACAE,QAAQ,CAAC,EAAD,CAAR,CACD,CAHQ,CAGP,CAACC,QAAD,CAHO,CAAT,CAKA,mBACE,aAAK,SAAS,CAAC,0BAAf,wBACE,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,sDAA7B,CACA,KAAK,CAAEJ,MADP,CACe,WAAW,CAAC,sBAD3B,CAEA,QAAQ,CAAE,kBAAAa,CAAC,QAAIZ,CAAAA,SAAS,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb,EAFX,EADF,CAMIf,MAAM,CAACO,MAAP,EAAiB,CAAjB,eACA,YAAK,SAAS,CAAC,2CAAf,CACA,KAAK,CAAE,CAACS,UAAU,CAAC,SAAZ,CAAuBC,MAAM,CAAE,EAA/B,CACCC,SAAS,CAAC,qBADX,CACkCC,QAAQ,CAAC,MAD3C,CADP,UAIMjB,KAAK,CAACK,MAAN,CACEL,KAAK,CAACkB,GAAN,CAAU,SAAAC,IAAI,qBACd,KAAC,UAAD,EAA2B,IAAI,CAAEA,IAAjC,EAAiBA,IAAI,CAACC,GAAtB,CADc,EAAd,CADF,cAIE,WAAI,SAAS,CAAC,uBAAd,wDARR,EAPJ,GADF,CAsBD,CAlDD,CAoDA,cAAevB,CAAAA,MAAf","sourcesContent":["import { useState,useEffect } from 'react'\nimport { getAPI } from '../../utils/FetchDatas';\nimport { IBlog } from '../../utils/TypeScript';\nimport { useLocation } from 'react-router-dom';\nimport SearchCard from '../cards/SearchCard';\n\nconst Search = () => {\n  const [search, setSearch] = useState('')\n  const [blogs, setBlogs] = useState<IBlog[]>([])\n\n  const { pathname } = useLocation()\n\n  useEffect(() => {\n    const delayDebounce = setTimeout(async () => {\n      if(search.length < 2) return setBlogs([]); \n\n      try {\n        const res = await getAPI(`search/blogs?title=${search}`)\n        setBlogs(res.data)\n\n      } catch (err) {\n          console.log(err)\n      } \n    },400)\n\n    return () => clearTimeout(delayDebounce)\n\n  },[search])\n\n  useEffect(() => {\n    setSearch('')\n    setBlogs([])\n  },[pathname])\n\n  return (\n    <div className=\"search position-relative\">\n      <input type=\"text\" className=\"form-control bg-transparent border border-dark w-100\"\n      value={search} placeholder=\"Enter your search...\"\n      onChange={e => setSearch(e.target.value)}  />\n\n      {\n        search.length >= 2 &&\n        <div className=\"position-absolute pt-2 px-1 w-100 rounded\" \n        style={{background:'#F2F6FF', zIndex: 10,\n                maxHeight:'calc(100vh - 100px)', overflow:'auto'}}>\n            {\n              blogs.length \n              ? blogs.map(blog => (\n                <SearchCard key={blog._id} blog={blog} />\n              ))\n              : <h3 className=\"text-center text-dark\">Looks like no result found for your search</h3>\n            }\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}