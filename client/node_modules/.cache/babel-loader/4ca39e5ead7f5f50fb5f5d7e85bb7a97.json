{"ast":null,"code":"import React from\"react\";import{Link,useParams}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{deleteBlog}from\"../../redux/actions/blogActions\";import{ALERT}from\"../../redux/types/alertType\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardHoriz=function CardHoriz(_ref){var _auth$user,_auth$user2;var blog=_ref.blog;var _useParams=useParams(),slug=_useParams.slug;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();var handleDelete=function handleDelete(){if(!auth.user||!auth.access_token)return;if(slug===auth.user._id||auth.user.role==='admin'){if(window.confirm(\"Do you want to delete this blog?\")){dispatch(deleteBlog(blog,auth.access_token));}}else{return dispatch({type:ALERT,payload:{errors:\"Invalid Authentication\"}});}};return/*#__PURE__*/_jsx(\"div\",{className:\"card mb-3 bg-white\",style:{minWidth:\"260px\",borderRadius:'15px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0 p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",style:{minHeight:'150px',maxHeight:'170px',overflow:'hidden'},children:blog.thumbnail&&/*#__PURE__*/_jsx(_Fragment,{children:typeof blog.thumbnail==='string'?/*#__PURE__*/_jsx(Link,{to:\"/blog/\".concat(blog._id),children:/*#__PURE__*/_jsx(\"img\",{src:blog.thumbnail,className:\"w-100 h-100\",alt:\"thumbnail\",style:{objectFit:'cover'}})}):/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(blog.thumbnail),className:\"w-100 h-100\",alt:\"thumbnail\",style:{objectFit:'cover'}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title fs-4\",children:/*#__PURE__*/_jsx(Link,{to:\"/blog/\".concat(blog._id),className:\"text-capitalize\",children:blog.title})}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"\".concat(blog.description.slice(0,100),\"...\")}),blog.title&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-text d-flex justify-content-between align-items-center\",children:[(slug&&blog.user._id===((_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user._id)||((_auth$user2=auth.user)===null||_auth$user2===void 0?void 0:_auth$user2.role)==='admin')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/update_blog/\".concat(blog._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit text-success\",title:\"edit\"})}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash text-danger mx-3\",title:\"delete\",onClick:handleDelete})]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-secondary\",children:new Date(blog.createdAt).toDateString()})]})]})})]})});};export default CardHoriz;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/components/cards/CardHoriz.tsx"],"names":["React","Link","useParams","useSelector","useDispatch","deleteBlog","ALERT","CardHoriz","blog","slug","state","auth","dispatch","handleDelete","user","access_token","_id","role","window","confirm","type","payload","errors","minWidth","borderRadius","minHeight","maxHeight","overflow","thumbnail","objectFit","URL","createObjectURL","title","description","slice","Date","createdAt","toDateString"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useSelector,useDispatch } from \"react-redux\";\nimport { deleteBlog } from \"../../redux/actions/blogActions\";\n\nimport { IBlog,IParams, IUser, RootStore } from \"../../utils/TypeScript\";\nimport { ALERT } from \"../../redux/types/alertType\";\n\ninterface IProps {\n    blog: IBlog\n}\n\nconst CardHoriz: React.FC<IProps> = ({blog}) => {\n\n    const { slug } = useParams<IParams>()\n    const { auth } = useSelector((state: RootStore) => state)\n    const dispatch = useDispatch()\n\n    const handleDelete = () => {\n        if(!auth.user || !auth.access_token) return;\n\n        if(slug === auth.user._id || auth.user.role === 'admin') {\n            if(window.confirm(\"Do you want to delete this blog?\")) {\n                dispatch(deleteBlog(blog, auth.access_token))\n            }\n        }else {\n            return dispatch({\n                type: ALERT,\n                payload: { errors: \"Invalid Authentication\"}\n            })\n        } \n        \n    }\n\n    return(\n        <div className=\"card mb-3 bg-white\" style={{minWidth: \"260px\", borderRadius: '15px'}}>\n            <div className=\"row g-0 p-2\">\n                <div className=\"col-md-4\" style={{\n                    minHeight: '150px', maxHeight: '170px', overflow: 'hidden'\n                }}>\n                {\n                    blog.thumbnail && \n                    <>\n                    {\n                        typeof(blog.thumbnail) === 'string'\n                        ? <Link to={`/blog/${blog._id}`}>\n                            <img src={blog.thumbnail} \n                            className=\"w-100 h-100\" \n                            alt=\"thumbnail\" style={{objectFit: 'cover'}} />\n                          </Link>\n                        :<img src={URL.createObjectURL(blog.thumbnail)} \n                            className=\"w-100 h-100\" \n                            alt=\"thumbnail\" style={{objectFit: 'cover'}} />\n                    }\n                    </>\n                }\n                \n                </div>\n                \n                <div className=\"col-md-8\">\n                    <div className=\"card-body\">\n                        <h5 className=\"card-title fs-4\">\n                            <Link to={`/blog/${blog._id}`}\n                            className=\"text-capitalize\">\n                                {blog.title}\n                            </Link>\n                        </h5>\n                        <p className=\"card-text\">{`${blog.description.slice(0,100)}...`}</p>\n                        {   \n                            blog.title && \n                                <div className=\"card-text d-flex justify-content-between align-items-center\">\n                                    {\n                                        ((slug && ((blog.user as IUser)._id === auth.user?._id)) || (auth.user?.role === 'admin')) &&\n                                        <div>\n                                            <Link to={`/update_blog/${blog._id}`}>\n                                                <i className=\"fas fa-edit text-success\" title=\"edit\" />\n                                            </Link>\n\n                                            <i className=\"fas fa-trash text-danger mx-3\" \n                                                title=\"delete\" onClick={handleDelete} />\n                                        </div> \n                                    }   \n                                    <small className=\"text-secondary\">\n                                        {new Date(blog.createdAt).toDateString()}\n                                    </small>\n                                </div>\n                        }\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default CardHoriz;"]},"metadata":{},"sourceType":"module"}