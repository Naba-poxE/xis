{"ast":null,"code":"import{useDispatch}from\"react-redux\";import{useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import NotFound from\"../components/global/NotFound\";import{deleteBlog}from\"../redux/actions/blogActions\";import{ALERT}from\"../redux/types/alertType\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Views=function Views(){var _auth$user;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,homeBlogs=_useSelector.homeBlogs;var dispatch=useDispatch();var handleDelete=function handleDelete(blog){if(!auth.user||!auth.access_token)return;if(auth.user.role==='admin'){if(window.confirm(\"Do you want to delete this blog?\")){dispatch(deleteBlog(blog,auth.access_token));}}else{return dispatch({type:ALERT,payload:{errors:\"Invalids Authentication\"}});}};if(((_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.role)!==\"admin\")return/*#__PURE__*/_jsx(NotFound,{});return/*#__PURE__*/_jsx(\"div\",{className:\"w-100 my-5 d-flex justify-content-center overflow-auto\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table neomorphism\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"_id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Writer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Views\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"CreatedAt\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-secondary\",children:homeBlogs.map(function(homeBlog){return homeBlog.blogs.map(function(blog){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:blog._id}),/*#__PURE__*/_jsx(\"td\",{children:homeBlog.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/blog/\".concat(blog._id),children:blog.title.slice(0,50)+\"...\"})}),/*#__PURE__*/_jsx(\"td\",{children:typeof blog.user!=='string'&&/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(blog.user._id),children:blog.user.name})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:blog.views}),/*#__PURE__*/_jsx(\"td\",{children:new Date(blog.createdAt).toDateString()}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{style:{marginRight:'15px'},to:\"/update_blog/\".concat(blog._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit text-success\",title:\"Edit\"})}),/*#__PURE__*/_jsx(\"i\",{style:{cursor:'pointer'},className:\"fas fa-trash-alt text-danger\",title:\"Remove\",onClick:function onClick(){return handleDelete(blog);}})]})]},blog._id);});})})]})})});};export default Views;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/pages/views.tsx"],"names":["useDispatch","useSelector","Link","NotFound","deleteBlog","ALERT","Views","state","auth","homeBlogs","dispatch","handleDelete","blog","user","access_token","role","window","confirm","type","payload","errors","map","homeBlog","blogs","_id","name","title","slice","views","Date","createdAt","toDateString","marginRight","cursor"],"mappings":"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","sourcesContent":["import { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport NotFound from \"../components/global/NotFound\";\nimport { IBlog, RootStore } from \"../utils/TypeScript\";\nimport { deleteBlog } from \"../redux/actions/blogActions\";\nimport { ALERT } from \"../redux/types/alertType\";\n\n\n\nconst Views = () => {\n\n    const { auth,homeBlogs } = useSelector((state: RootStore) => state)\n\n    const dispatch = useDispatch()\n\n    const handleDelete = (blog: IBlog) => {\n        if(!auth.user || !auth.access_token) return;\n\n        if(auth.user.role === 'admin') {\n            if(window.confirm(\"Do you want to delete this blog?\")) {\n                dispatch(deleteBlog(blog, auth.access_token))\n            }\n        }else {\n            return dispatch({\n                type: ALERT,\n                payload: { errors: \"Invalids Authentication\"}\n            })\n        } \n    }\n\n\n    if(auth.user?.role !== \"admin\") return <NotFound/>\n    return(\n        <div className=\"w-100 my-5 d-flex justify-content-center overflow-auto\">\n            <div>\n                <table className=\"table neomorphism\">\n                    <thead>\n                        <tr>\n                            <th scope=\"col\">_id</th>\n                            <th scope=\"col\">Category</th>\n                            <th scope=\"col\">Title</th>\n                            <th scope=\"col\">Writer</th>\n                            <th scope=\"col\">Views</th>\n                            <th scope=\"col\">CreatedAt</th>\n                            <th scope=\"col\">Action</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"text-secondary\">\n                        {\n                            homeBlogs.map(homeBlog => (\n                                homeBlog.blogs.map(blog => (\n                                    <tr key={blog._id}>\n                                        <th scope=\"row\">{blog._id}</th>\n                                        <td>{homeBlog.name}</td>\n                                        <td>\n                                            <Link to={`/blog/${blog._id}`}>\n                                                {blog.title.slice(0,50) + \"...\"}\n                                            </Link>\n                                        </td>\n                                        <td>\n                                            {\n                                                typeof(blog.user) !== 'string' &&\n                                                <Link to={`/profile/${blog.user._id}`}>{blog.user.name}</Link>\n                                            }\n                                        </td>\n                                        <td className=\"text-center\">{blog.views}</td>\n                                        <td>{new Date(blog.createdAt).toDateString()}</td>\n                                        <td>\n                                            <Link style={{marginRight:'15px'}} to={`/update_blog/${blog._id}`}>\n                                                <i className=\"fas fa-edit text-success\" title=\"Edit\"></i>\n                                            </Link>\n                                            <i style={{cursor:'pointer'}} className=\"fas fa-trash-alt text-danger\" title=\"Remove\"\n                                            onClick={() =>  handleDelete(blog)}></i>\n                                        </td>\n                                    </tr>\n                                ))\n                            ))    \n                        }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}\n\nexport default Views;"]},"metadata":{},"sourceType":"module"}