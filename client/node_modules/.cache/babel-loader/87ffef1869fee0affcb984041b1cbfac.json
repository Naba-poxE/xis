{"ast":null,"code":"import _slicedToArray from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{useHistory,useParams}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{getBlogsByCategoryId}from\"../../redux/actions/blogActions\";import Loading from\"../../components/global/Loading\";import Pagination from\"../../components/global/Pagination\";import CardVert from\"../../components/cards/CardVert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BlogsByCategory=function BlogsByCategory(){var _useSelector=useSelector(function(state){return state;}),categories=_useSelector.categories,blogsCategory=_useSelector.blogsCategory;var dispatch=useDispatch();var _useParams=useParams(),slug=_useParams.slug;var history=useHistory();var search=history.location.search;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),categoryId=_useState2[0],setCategoryId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),categoryName=_useState4[0],setCategoryName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),blogs=_useState6[0],setBlogs=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),total=_useState8[0],setTotal=_useState8[1];useEffect(function(){var category=categories.find(function(element){return element.name===slug;});//find gets the very first elemet which satifies the given condition....\nif(category){setCategoryId(category._id);setCategoryName(category===null||category===void 0?void 0:category.name);}},[slug,categories]);useEffect(function(){if(!categoryId)return;if(blogsCategory.every(function(item){return item.id!==categoryId;})){dispatch(getBlogsByCategoryId(categoryId,search));}else{var data=blogsCategory.find(function(element){return element.id===categoryId;});if(!data)return;setBlogs(data.blogs);setTotal(data.total);if(data.search)history.push(data.search);//the search came when we put the search on blogsType.ts\n}},[categoryId,blogsCategory,dispatch,search,history]);var handlePagination=function handlePagination(num){var search=\"?page=\".concat(num);dispatch(getBlogsByCategoryId(categoryId,search));};if(!blogs)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-capitalize text-secondary mb-5\",children:categoryName}),/*#__PURE__*/_jsx(\"div\",{className:\"show_blogs\",children:blogs.map(function(blog){return/*#__PURE__*/_jsx(CardVert,{blog:blog},blog._id);})}),total>1&&/*#__PURE__*/_jsx(Pagination,{total:total,callback:handlePagination})]});};export default BlogsByCategory;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/pages/blogs/[slug].tsx"],"names":["useState","useEffect","useHistory","useParams","useSelector","useDispatch","getBlogsByCategoryId","Loading","Pagination","CardVert","BlogsByCategory","state","categories","blogsCategory","dispatch","slug","history","search","location","categoryId","setCategoryId","categoryName","setCategoryName","blogs","setBlogs","total","setTotal","category","find","element","name","_id","every","item","id","data","push","handlePagination","num","map","blog"],"mappings":"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","sourcesContent":["import { useState,useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useSelector,useDispatch } from \"react-redux\";\nimport { RootStore,IParams, IBlog } from \"../../utils/TypeScript\";\nimport { getBlogsByCategoryId } from \"../../redux/actions/blogActions\";\nimport Loading from \"../../components/global/Loading\";\nimport Pagination from \"../../components/global/Pagination\";\nimport CardVert from \"../../components/cards/CardVert\";\n\n\nconst BlogsByCategory = () => {\n    const { categories,blogsCategory } = useSelector((state: RootStore) => state)\n    const dispatch = useDispatch()\n    const { slug } =  useParams<IParams>()\n    \n    const history = useHistory()\n    const { search } = history.location\n    \n    const [ categoryId,setCategoryId ] = useState('')\n    const [ categoryName,setCategoryName ] = useState('')\n    const [ blogs,setBlogs ] = useState<IBlog[]>()\n    const [ total,setTotal ] = useState(0)\n\n    useEffect(() => {\n        const category = categories.find(element => element.name === slug )  //find gets the very first elemet which satifies the given condition....\n\n        if(category){\n            setCategoryId(category._id) \n            setCategoryName(category?.name)\n        } \n\n    },[slug,categories])\n\n    useEffect(() => {\n        if(!categoryId) return;\n\n        if(blogsCategory.every(item => item.id !== categoryId)) {\n            dispatch(getBlogsByCategoryId(categoryId, search))\n        }else {\n            const data = blogsCategory.find(element => element.id === categoryId)\n            if(!data) return;\n\n            setBlogs(data.blogs)\n            setTotal(data.total)\n\n            if(data.search) history.push(data.search) //the search came when we put the search on blogsType.ts\n        }\n            \n    },[categoryId, blogsCategory, dispatch, search, history])\n\n    const handlePagination = (num: number) => {\n        const search = `?page=${num}`\n        dispatch(getBlogsByCategoryId(categoryId, search))\n    }\n\n    if(!blogs) return <Loading/>\n    return (\n        <div className=\"container\">\n            <h1 className=\"text-center text-capitalize text-secondary mb-5\">{categoryName}</h1>\n            <div className=\"show_blogs\">\n                {\n                    blogs.map(blog => (\n                        <CardVert key={blog._id} blog={blog} />\n                    ))\n                }\n            </div>\n            {\n                total > 1 && \n                <Pagination total={total} callback={handlePagination} />\n            }\n           \n        </div>\n    )\n}\n\nexport default BlogsByCategory;"]},"metadata":{},"sourceType":"module"}