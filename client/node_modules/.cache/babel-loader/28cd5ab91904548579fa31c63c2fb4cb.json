{"ast":null,"code":"import _objectSpread from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/kushal/tip-saza/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{createCategory,updateCategory,deleteCategory}from\"../redux/actions/categoryActions\";import NotFound from\"../components/global/NotFound\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Category=function Category(){var _auth$user;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),edit=_useState4[0],setEdit=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,categories=_useSelector.categories;var dispatch=useDispatch();useEffect(function(){if(edit)setName(edit.name);},[edit]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(!auth.access_token||!name)return;if(edit){if(edit.name===name)return;var data=_objectSpread(_objectSpread({},edit),{},{name:name});dispatch(updateCategory(data,auth.access_token));}else{dispatch(createCategory(name,auth.access_token));}setName('');setEdit(null);};var handleDelete=function handleDelete(id){if(!auth.access_token)return;if(window.confirm('Are you sure to delete this category?')){dispatch(deleteCategory(id,auth.access_token));}};if(((_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.role)!=='admin')return/*#__PURE__*/_jsx(NotFound,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"category\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-secondary\",htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[edit&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times me-2 text-danger\",onClick:function onClick(){return setEdit(null);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"category\",name:\"category\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:edit?'Update':'Create'})]})]}),/*#__PURE__*/_jsx(\"div\",{children:categories.map(function(category){return/*#__PURE__*/_jsxs(\"div\",{className:\"category_row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"m-0 fw-bolder text-capitalize\",children:category.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mx-2\",onClick:function onClick(){return setEdit(category);}}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\",onClick:function onClick(){return handleDelete(category._id);}})]})]},category._id);})})]});};export default Category;","map":{"version":3,"sources":["/home/kushal/tip-saza/client/src/pages/category.tsx"],"names":["useState","useEffect","useSelector","useDispatch","createCategory","updateCategory","deleteCategory","NotFound","Category","name","setName","edit","setEdit","state","auth","categories","dispatch","handleSubmit","e","preventDefault","access_token","data","handleDelete","id","window","confirm","user","role","target","value","map","category","_id"],"mappings":"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","sourcesContent":["import { useState,useEffect } from \"react\";\nimport { useSelector,useDispatch } from \"react-redux\";\nimport { FormSubmit,RootStore,ICategory } from \"../utils/TypeScript\";\nimport { createCategory,updateCategory,deleteCategory } from \"../redux/actions/categoryActions\";\nimport NotFound from \"../components/global/NotFound\";\n\n\nconst Category = () => {\n\n    const [name, setName] = useState('')\n    const [edit, setEdit] = useState<ICategory | null>(null)\n  \n    const { auth, categories } = useSelector((state: RootStore) => state)\n    const dispatch = useDispatch()\n  \n    useEffect(() => {\n      if(edit) setName(edit.name)\n    },[edit])\n  \n    const handleSubmit = (e: FormSubmit) => {\n      e.preventDefault()\n      if(!auth.access_token || !name) return;\n  \n      if(edit){\n        if(edit.name === name) return;\n        const data = {...edit, name}\n        dispatch(updateCategory(data, auth.access_token))\n      }else{\n        dispatch(createCategory(name, auth.access_token))\n      }\n      setName('')\n      setEdit(null)\n    }\n  \n  \n    const handleDelete = (id: string) => {\n      if(!auth.access_token) return;\n      if(window.confirm('Are you sure to delete this category?')){\n        dispatch(deleteCategory(id, auth.access_token))\n      }\n    }\n\n    if(auth.user?.role !== 'admin') return <NotFound />\n    return(\n        <div className=\"category\">\n            <form onSubmit={handleSubmit}>\n                <label className=\"text-secondary\" htmlFor=\"category\">Category</label>\n\n                <div className=\"d-flex align-items-center\">\n                    {\n                        edit && <i \n                                    className=\"fas fa-times me-2 text-danger\"\n                                    onClick={() => setEdit(null)} />\n                    }\n                    <input \n                        type=\"text\" id=\"category\" \n                        name=\"category\" value={name} \n                        onChange={(e) => setName(e.target.value)} />\n\n                    <button type=\"submit\">\n                        {edit ? 'Update' : 'Create'}\n                    </button>    \n                </div>\n            </form>\n            <div>\n                {\n                    categories.map((category) => (\n                        <div className=\"category_row\" key={category._id}>\n                            <p className=\"m-0 fw-bolder text-capitalize\">{category.name}</p>\n\n                            <div className=\"text-muted\">\n                                <i className=\"fas fa-edit mx-2\"\n                                   onClick={() => setEdit(category)} />\n                                <i className=\"fas fa-trash-alt\"\n                                   onClick={() => handleDelete(category._id)}/>\n                            </div>\n                        </div>\n                    ))\n                }\n                \n            </div>\n        </div>\n    )\n}\n\nexport default Category;"]},"metadata":{},"sourceType":"module"}